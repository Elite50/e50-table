/*! e50-table 2014-11-13 */
"use strict";angular.module("e50Table",["ngResource"]),angular.module("e50Table").directive("e50Fetch",["$parse","$resource","Poll",function(a,b,c){return{restrict:"A",require:"e50Table",link:function(d,e,f){function g(){return h.fetch(a(f.e50FetchParams)(d),a(f.e50FetchBody)(d)).$promise.then(function(a){d.e50SetData(a.data)})}var h=b(f.e50Fetch,{},{fetch:{method:"e50FetchMethod"in f?f.e50FetchMethod:"GET"}});if("e50FetchOnce"in f?g():d.$watch(function(){return[a(f.e50FetchParams)(d),a(f.e50FetchBody)(d)]},g,!0),"e50Poll"in f){var i=new c(g,f.e50Poll);d.$on("$destroy",function(){i.stop()})}}}}]),angular.module("e50Table").directive("e50Hover",function(){return{restrict:"A",link:function(a,b,c){var d=c.e50Hover?c.e50Hover:"hover";b.on("mouseenter",function(){b.addClass(d)}).on("mouseleave",function(){b.removeClass(d)})}}}),angular.module("e50Table").directive("e50NoProp",function(){return{restrict:"A",link:function(a,b){b.on("click",function(a){a.stopPropagation()})}}}),angular.module("e50Table").directive("e50Table",["$parse",function(a){return{restrict:"A",scope:!0,controller:function(){},compile:function(b,c){var d=b[0].querySelector("[e50-table-row]"),e=document.createAttribute("ng-repeat"),f=c.e50DataKey?c.e50DataKey:"t";return e.value=f+" in e50GetData() | orderBy : e50Sort : e50SortReverse",d.attributes.setNamedItem(e),function(b,c,d){if(d.$observe("e50Sort",function(a){b.e50Sort=a}),d.$observe("e50SortReverse",function(a){b.e50SortReverse=a}),"e50Data"in d)b.e50GetData=function(){return a(d.e50Data)(b)},b.e50SetData=function(c){a(d.e50Data).assign(b.$parent,c)};else{var e=[];b.e50GetData=function(){return e},b.e50SetData=function(a){e=a}}}}}}]),angular.module("e50Table").factory("Poll",["$timeout",function(a){function b(a,b){this.delay=b?b:1e3,this.callback=a,this.poll()}return b.prototype.poll=function(){var b=this;this.callback().finally(function(){b.timeout=a(function(){b.poll()},b.delay)})},b.prototype.stop=function(){a.cancel(this.timeout)},b}]);